<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–∑–∏–Ω–∞ - –õ–µ–ø–µ—Å—Ç–∫–∏ —Ä–æ–∑</title>
    <link rel="stylesheet" href="styfive.css">
    <script src="hide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="modules/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container header-content">
            <nav>
                <ul>
                    <li><a href="#" id="menu-toggle">‚ò∞</a></li>
                    <li class="menu-item"><a href="2.html">–û –Ω–∞—Å</a></li>
                    <li class="menu-item"><a href="1.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li class="menu-item"><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </nav>
            <div class="logo"><a href="2.html">–õ–µ–ø–µ—Å—Ç–∫–∏ —Ä–æ–∑</a></div>
            <div class="header-icons">
                <a href="5.html"><i class="fa fa-shopping-cart" aria-hidden="true"></i></a>
                <a href="#"><i class="fa fa-search" aria-hidden="true"></i></a>
                <a href="3.html"><i class="fa fa-user-circle" aria-hidden="true"></i></a>
                <a href="4.html"><i class="fa fa-heart" aria-hidden="true"></i></a>
            </div>
        </div>
    </header>

    <main>
        <section class="cart">
            <div class="container">
                <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
                <div class="cart-items">
                    <div class="cart-item">
                        <img src="images/pp.png" alt="–°–∞–¥–æ–≤–æ–µ –∞—Å—Å–æ—Ä—Ç–∏">
                        <div class="cart-item-details">
                            <h3>–°–∞–¥–æ–≤–æ–µ –∞—Å—Å–æ—Ä—Ç–∏ 1600 —Ä—É–±–ª–µ–π</h3>
                            <div class="quantity-controls">
                                <button>+</button>
                                <input type="number" value="1" min="1">
                                <button>-</button>
                            </div>
                        </div>
                    </div>

                    <div class="cart-item">
                        <img src="images/pp2.png" alt="–°–ª–∏—è–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤">
                        <div class="cart-item-details">
                            <h3>–°–ª–∏—è–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ 1500 —Ä—É–±–ª–µ–π</h3>
                            <div class="quantity-controls">
                                <button>+</button>
                                <input type="number" value="1" min="1">
                                <button>-</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="order-summary">
                    <h3>–°–∞–¥–æ–≤–æ–µ –∞—Å—Å–æ—Ä—Ç–∏ 1600 –†–£–ë–õ–ï–ô</h3>
                    <h3>–°–ª–∏—è–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ 1500 –†–£–ë–õ–ï–ô</h3>
                    <p>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: –ì.–∫–∞—Ä–∞—Å—É–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, 120</p>
                    <p>–î–æ—Å—Ç–∞–≤–∫–∞: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</p>
                    <h2>–í—Å–µ–≥–æ: 3100 —Ä—É–±–ª–µ–π</h2>
                    <button class="buy-button"><a href="6.html">–ö—É–ø–∏—Ç—å</a></button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <div class="footer-icons">
                <a href="#">‚úâÔ∏è</a>
                <a href="#">üí¨</a>
            </div>
            <div class="footer-info">
                <p>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</p>
                <p>+123 456 789</p>
                <p>flout_world@mail.ru</p>
                <p>10:00 - 19:00</p>
            </div>
            <p class="copyright">flout_world@mail.ru ¬©Copyright 2025. All rights reserved.</p>
        </div>
    </footer>

</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
  const cartItemsContainer = document.querySelector('.cart-items');
  const orderSummary = document.querySelector('.order-summary');

  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –∏–∑ localStorage
  const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
  function renderCart() {
    cartItemsContainer.innerHTML = '';
    let total = 0;

    cartItems.forEach(item => {
      // –ü–∞—Ä—Å–∏–º —Ü–µ–Ω—É –∏–∑ —Å—Ç—Ä–æ–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä "–°–∞–¥–æ–≤–æ–µ –∞—Å—Å–æ—Ä—Ç–∏ 1600 —Ä—É–±–ª–µ–π"
      const priceMatch = item.title.match(/(\d+)\s*—Ä—É–±/);
      const price = priceMatch ? parseInt(priceMatch[1], 10) : 0;
      const productName = item.title.replace(/\d+\s*—Ä—É–±.*/i, '').trim();
      const itemTotalPrice = price * item.quantity;
      total += itemTotalPrice;

      const cartItem = document.createElement('div');
      cartItem.classList.add('cart-item');
      cartItem.innerHTML = `
        <img src="${item.img}" alt="${productName}">
        <div class="cart-item-details">
          <h3>${productName} ${itemTotalPrice} —Ä—É–±–ª–µ–π</h3>
          <div class="quantity-controls">
            <button class="plus">+</button>
            <input type="number" value="${item.quantity}" min="1">
            <button class="minus">-</button>
          </div>
        </div>
      `;
      cartItemsContainer.appendChild(cartItem);

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
      const plusBtn = cartItem.querySelector('.plus');
      const minusBtn = cartItem.querySelector('.minus');
      const quantityInput = cartItem.querySelector('input[type="number"]');

      plusBtn.addEventListener('click', () => {
        quantityInput.value = parseInt(quantityInput.value) + 1;
        updateQuantity(cartItem, productName);
      });

      minusBtn.addEventListener('click', () => {
        if (parseInt(quantityInput.value) > 1) {
          quantityInput.value = parseInt(quantityInput.value) - 1;
          updateQuantity(cartItem, productName);
        }
      });

      quantityInput.addEventListener('change', () => {
        if (quantityInput.value < 1 || isNaN(quantityInput.value)) quantityInput.value = 1;
        updateQuantity(cartItem, productName);
      });
    });

    updateOrderSummary(total);
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –∏ —Ü–µ–Ω—ã
  function updateQuantity(cartItem, productName) {
    const quantityInput = cartItem.querySelector('input[type="number"]');
    const quantity = parseInt(quantityInput.value, 10);

    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ cartItems
    const item = cartItems.find(i => i.title.includes(productName));
    if (item) {
      item.quantity = quantity;
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
      const priceMatch = item.title.match(/(\d+)\s*—Ä—É–±/);
      const price = priceMatch ? parseInt(priceMatch[1], 10) : 0;
      const newPrice = price * quantity;
      cartItem.querySelector('h3').textContent = `${productName} ${newPrice} —Ä—É–±–ª–µ–π`;
    }

    // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –æ–±—â—É—é —Å—É–º–º—É
    let total = 0;
    cartItems.forEach(i => {
      const priceMatch = i.title.match(/(\d+)\s*—Ä—É–±/);
      const price = priceMatch ? parseInt(priceMatch[1], 10) : 0;
      total += price * i.quantity;
    });
    updateOrderSummary(total);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ localStorage
    localStorage.setItem('cartItems', JSON.stringify(cartItems));
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞ —Å –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º–æ–π
  function updateOrderSummary(total) {
    orderSummary.innerHTML = `
      ${cartItems.map(i => `<h3>${i.title.replace(/\d+\s*—Ä—É–±.*/i, '').trim()} ${i.quantity * (parseInt(i.title.match(/(\d+)\s*—Ä—É–±/)[1], 10))} –†–£–ë–õ–ï–ô</h3>`).join('')}
      <p>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: –ì.–∫–∞—Ä–∞—Å—É–∫, —É–ª. –õ–µ–Ω–∏–Ω–∞, 120</p>
      <p>–î–æ—Å—Ç–∞–≤–∫–∞: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</p>
      <h2>–í—Å–µ–≥–æ: ${total} —Ä—É–±–ª–µ–π</h2>
      <button class="buy-button"><a href="6.html">–ö—É–ø–∏—Ç—å</a></button>
    `;
  }

  renderCart();
});

</script>
</html>
